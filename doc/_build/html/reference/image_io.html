
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>colabseg.image_io module &#8212; colabseg 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=c5ced968eda925caa686" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=c5ced968eda925caa686" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=c5ced968eda925caa686" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=c5ced968eda925caa686" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/css/general.css?v=e68c333d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=c5ced968eda925caa686" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=c5ced968eda925caa686" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=c5ced968eda925caa686"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=e031e9a9"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=4ea706d9"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/image_io';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">colabseg 0.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../quickstart/index.html">
                        Quickstart
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../genindex.html">
                        Index
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/KosinskiLab/colabseg" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../quickstart/index.html">
                        Quickstart
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../genindex.html">
                        Index
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/KosinskiLab/colabseg" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">colabseg.ima...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="module-colabseg.image_io">
<span id="colabseg-image-io-module"></span><h1>colabseg.image_io module<a class="headerlink" href="#module-colabseg.image_io" title="Permalink to this heading">#</a></h1>
<dl class="py exception">
<dt class="sig sig-object py" id="colabseg.image_io.FileTypeError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FileTypeError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requested</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defined</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.FileTypeError" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OSError</span></code></p>
<p>Exception reised when nonexistant file type is given.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ImageIO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Reads and writes EM image files in em, mrc and raw formats.
An image file in em or mrc format can be read in the following way:</p>
<blockquote>
<div><p>myImage = ImageIO()
myImage.read(file=’my_file.em’)</p>
</div></blockquote>
<dl class="simple">
<dt>ow written as:</dt><dd><p>myImage = ImageIO()
myImage.write(file=’my_file.em’, data=my_array, header=my_header)</p>
</dd>
</dl>
<p>Raw file reading and writting is the same except that more arguments are
required to read (see self.read).
Important attributes:</p>
<blockquote>
<div><ul class="simple">
<li><p>self.fileName: file name</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">self.file_</span></a>: file instance</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#colabseg.image_io.ImageIO.pixelsize" title="colabseg.image_io.ImageIO.pixelsize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pixelsize</span></code></a></dt><dd><p>Pixel size (at specimen level) in nm</p>
</dd>
<dt><a class="reference internal" href="#colabseg.image_io.ImageIO.tiltAngle" title="colabseg.image_io.ImageIO.tiltAngle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tiltAngle</span></code></a></dt><dd><p>Tilt angle (in deg)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.adjustLength" title="colabseg.image_io.ImageIO.adjustLength"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adjustLength</span></code></a>([shape, pixel])</p></td>
<td><p>Calculate length based on shape and pixel. If args shape and pixel are None, self.shape and self.pixel are used. The length is calculated in A, as this is what is used in mrc header. To be used for mrc files only. Sets attribute length. Arguments:   - shape: data shape   - pixel: pixel size in nm.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.checkFile" title="colabseg.image_io.ImageIO.checkFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">checkFile</span></code></a>(file_, mode)</p></td>
<td><p>If <a href="#id3"><span class="problematic" id="id4">file_</span></a> is a string open the file with that name. If <a href="#id5"><span class="problematic" id="id6">file_</span></a> is None, use self.fileName and open the file. If <a href="#id7"><span class="problematic" id="id8">file_</span></a> is a file instance don't do anything. Sets:   - self.fileName: <a href="#id9"><span class="problematic" id="id10">file_</span></a> if a string   - <a href="#id11"><span class="problematic" id="id12">self.file_</span></a>: file instance Arguments:   - <a href="#id13"><span class="problematic" id="id14">file_</span></a>: file name or instance of file   - mode: mode as in open().</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.fix" title="colabseg.image_io.ImageIO.fix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fix</span></code></a>([mode, microscope])</p></td>
<td><p>Fixes wrong values in header and in the data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.fixHeader" title="colabseg.image_io.ImageIO.fixHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fixHeader</span></code></a>([mode, microscope])</p></td>
<td><p>Fixes wrong values in microscope image header. Mode determines which values are fixed. Currently defined modes are:   - 'polara_fei-tomo': images obtained on Polara (at MPI of   Biochemistry) using FEI tomography package and saved in EM   format. Values fixed:     - voltage: set to 300000     - cs: set to 2000     - ccdPixelsize: physical pixel size, read from microscope_db     - ccdLength: physical size of the CCD, pixelsize x n_pixels     - _pixelsize: pixel size at the specimen level [fm]. Nominal mag     is read from the header and converted to pixelsize using     microscope_db   - 'krios_fei-tomo': images obtained on Krios (at MPI of   Biochemistry) using FEI tomography package and saved in EM   format. Pixel size at the specimen level is correct, and the physical   detector length might be correct. Values fixed:     - voltage: set to 300000     - cs: set to 2000   - 'cm300': images from cm300 in EM format   - None: doesn't do anything If mode is 'polara_fei-tomo', then arg microscope has to be specified. The allowed values are specified in microscope_db.py. Currently (r564) these are: 'polara-1_01-07', 'polara-1_01-09' and 'polara-2_01-09'. Updates the appropriate header: self.emHeader if file format is 'em', or self.mrcHeader for mrc files.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.getFromEMHeader" title="colabseg.image_io.ImageIO.getFromEMHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getFromEMHeader</span></code></a>(name)</p></td>
<td><p>Reads the value of variable name from self.emHeader and returns it.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.getPixelsize" title="colabseg.image_io.ImageIO.getPixelsize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getPixelsize</span></code></a>([diff])</p></td>
<td><p>Returns pixel size (at specimen level) in nm.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.getTiltAngle" title="colabseg.image_io.ImageIO.getTiltAngle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getTiltAngle</span></code></a>()</p></td>
<td><p>Returns titl angle in degrees.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.parseMRCHeader" title="colabseg.image_io.ImageIO.parseMRCHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parseMRCHeader</span></code></a>([header])</p></td>
<td><p>Parse mrc header. If arg header is None, self.mrcHeader is used. Also sets self.labels in case self.headerString is present. In this case self.headerString has to be consistent with header (arg or attribute). Sets attributes:   - mrcHeader (if given as arg)   - byteOrder   - shape   - dataType   - axisOrder   - pixel: pixel size in nm   - length: lenght in all dimensions in nm.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.putInEMHeader" title="colabseg.image_io.ImageIO.putInEMHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">putInEMHeader</span></code></a>(name, value)</p></td>
<td><p>Puts value in self.EmHeaderFields at the position corresponding to name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.read" title="colabseg.image_io.ImageIO.read"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read</span></code></a>([file, fileFormat, byteOrder, ...])</p></td>
<td><p>Reads image file in em, mrc or raw data formats and saves the data in numpy.array format. For reading em and mrc files (having correct extension) only file argument is necessary:   image = Image()   image.read(file='myfile.em') or to prvent reading the whole file into memory:   image.read(file='myfile.em', memmap=True) Alternatively, file name can be given in the constructor:   image = Image(file='myfile.em')   image.read() If other arguments are given they will override the corresponding values obtained form image header (use if you know what you're doing). For reading raw files, arguments dataType and shape need to be specified:   read(file='myfile.raw', dataType='float32', shape=(200,150,70)) By default, arguments byteOrder='&lt;' (little-endian) and arrayOrder='F'. For mrc and em files, array order is determined from arg arrayOrder, from self.arrayOrder, or it is set to the default (&quot;F&quot;) in this order. Data is read according the determined array order. That is, array order is not read from the file header. File format is determined from the extension:   - 'em' and 'EM' for em format   - 'mrc', 'rec' and 'mrcs' for mrc format   - 'raw', 'dat' and 'RAW' for raw format This can be overriden by specifying fileFormat argument. Byte order is read from the header for em files. For mrc, data type is read from the header using the system byte order and if that fails using the other one. In case that also fails ValueError is raised. The data is read according to Array order is not read from the header. Instead, array order specified by arg arrayOrder or self.arrayOrder is used for reading the data. If arg memmap is True, instead into a ndarray, the data is read to a memory map. That means that the complete data is not read into the memory, but the required parts are read on demand. This is useful when working with large images, but might not always work properly because the memory map is not quite properly a subclass of numpy.ndarray (from Numpy doc). Data from mrc files is always read as 3D because mrc header always contains lengths for all three dimensions (the length of the last dimeension is 1 for 2D images). In such cases one can obtain the 2D ndarray using:   self.data.reshape(self.data.shape[0:2]) Arguments:   - file: file name   - fileFormat: 'em', 'mrc', or 'raw'   - byteOrder: '&lt;' (little-endian), '&gt;' (big-endian)   - dataType: any of the numpy types, e.g.: 'int8', 'int16', 'int32',     'float32', 'float64'   - arrayOrder: 'C' (z-axis fastest), or 'F' (x-axis fastest)   - shape: (x_dim, y_dim, z_dim), needs to be compatible with the   data read   - memmap: Flag indicating if the data is read to a memory map,   instead of reading it into a ndarray Sets the following attributes (in addition to the arguments):   - data: data in numpy.array form   - emHeader / mrcHeader: tuple of all header values (em/mrc) files   - header: emHeader for em file, mrcHeader for mrc file or raw header   for raw file   - headerString: string containing a header Alternatively, any argument can be omitted if an attribute of the same name is set.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readData" title="colabseg.image_io.ImageIO.readData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readData</span></code></a>([shape, memmap])</p></td>
<td><p>Reads data from an image file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readEM" title="colabseg.image_io.ImageIO.readEM"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readEM</span></code></a>([file, byteOrder, dataType, ...])</p></td>
<td><p>Reads EM file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readEMHeader" title="colabseg.image_io.ImageIO.readEMHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readEMHeader</span></code></a>([file, byteOrder])</p></td>
<td><p>Reads a header of an EM file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readHeader" title="colabseg.image_io.ImageIO.readHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readHeader</span></code></a>([file, fileFormat, byteOrder])</p></td>
<td><p>Reads heder of an image file in em, mrc or raw data formats.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readMRC" title="colabseg.image_io.ImageIO.readMRC"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readMRC</span></code></a>([file, byteOrder, dataType, ...])</p></td>
<td><p>Reads mrc file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readMRCHeader" title="colabseg.image_io.ImageIO.readMRCHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readMRCHeader</span></code></a>([file, byteOrder])</p></td>
<td><p>Reads a header of an mrc file. To dermine the byte order the file header is read according to the system byte order. If the data type is not recognized, the other byte order is used and the data type is checked again. If it still doesn't work, ValueError is raised. Sets attributes:   - headerString   - mrcHeader   - byteOrder   - shape   - dataType   - axisOrder   - pixel: pixel size in nm   - length: linght in all dimensions in nm.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readRaw" title="colabseg.image_io.ImageIO.readRaw"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readRaw</span></code></a>([file, dataType, shape, byteOrder, ...])</p></td>
<td><p>Reads raw data file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.readRawHeader" title="colabseg.image_io.ImageIO.readRawHeader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readRawHeader</span></code></a>([file, size])</p></td>
<td><p>Reads a header of a raw file. Sets:   - headerString: header as a string Arguments:   - file: file name or a file instance   - size: header size in bytes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.setData" title="colabseg.image_io.ImageIO.setData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setData</span></code></a>(data[, shape, pixel])</p></td>
<td><p>Reshapes data according to the arg shape (if specified) and saves it as attribute self.data. Also sets attributes self.shape and self.dataType accordingly. For mrc files, length is also set (see self.adjustLength()). In this case, arg pixel has to be specified, or self.pixel has to be defined previously. Sets attributes:   - data   - shape   - dataType   - length Arguments:   - data: image data   - shape: image shape   - pixel: pixel size in nm.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.setFileFormat" title="colabseg.image_io.ImageIO.setFileFormat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setFileFormat</span></code></a>([fileFormat, file_])</p></td>
<td><p>Sets self.fileFormat. It is determined in the following order: first from the argument fileFormat, then from the file extension and finally from the already existing value of self.fileFormat Arguments:   - <a href="#id15"><span class="problematic" id="id16">file_</span></a>: file name   - fileFormat: file Format.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.setTiltAngle" title="colabseg.image_io.ImageIO.setTiltAngle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setTiltAngle</span></code></a>(angle)</p></td>
<td><p>Sets self._tiltAngle to angle*1000 and puts that value in emHeader.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.write" title="colabseg.image_io.ImageIO.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code></a>([file, data, fileFormat, byteOrder, ...])</p></td>
<td><p>Writes image file (header if applicable and data). Values of all non-None arguments are saved as properties with same names. If fileFormat is not given it is determined from the file extension. Data (image) has to be specified by arg data or previously set self.data attribute. Data type and shape are determined by args dataType and shape, previously set attributes self.dataType and self.shape, or by the data type and shape of the data, in this order. If data type (determined as described above) is not one of the data types used for the specified file format (ubyte, int16, float32, complex64 for mrc and uint8, uint16, int32, float32, float64, complex64 for em), then the value of arg dataType has to be one of the appropriate data types. Otherwise an exception is raised. If data type (determined as described above) is different from the type of actual data, the data is converted to the data type. Note that if these two types are incompatible according to arg casting, an exception is raised. Values for byteOrder and arrayOrder are set to the first value found from the following: the arguments, properties with same names, or emHeader / mrcHeader default values. The data is converted to the (prevously determined) shape and array order and then written. That means that the shape and the array order may be changed in the original array (argument data or self.data). However, array order is not written the header. If data is not given, only a header is writen. Additional header parameters are determined for mrc format. Nxstart, nystart and nzstart are set to 0, while mx, my and mz to the corresponding data size (grid size). xlen, ylen and zlen are taken from arg length if given, or obtained by multiplying data size with pixel size (in nm). Arguments:   - file: file name   - data: (ndarray) image   - fileFormat: 'em', 'mrc', or 'raw'   - byteOrder: '&lt;' (little-endian), '&gt;' (big-endian)   - dataType: any of the numpy types specified as strings, e.g.:     'int8', 'int16', 'int32', 'float32', 'float64', or as     numpy.dtype   - arrayOrder: 'C' (z-axis fastest), or 'F' (x-axis fastest)   - shape: (x_dim, y_dim, z_dim)   - length: (list aor ndarray) length in each dimension in nm (used   only for mrc format)   - pixel: pixel size in nm (used only for mrc format if length is   None)   - header: (list) image header   - extended: (str) extended header string, only for mrc   - casting: Controls what kind of data casting may occur: 'no',   'equiv', 'safe', 'same_kind', 'unsafe'. Identical to numpy.astype()   method.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.writeData" title="colabseg.image_io.ImageIO.writeData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeData</span></code></a>()</p></td>
<td><p>Writes data in numpy.ndarray format to an image file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.writeEM" title="colabseg.image_io.ImageIO.writeEM"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeEM</span></code></a>([file, header, byteOrder, shape, ...])</p></td>
<td><p>Writes EM file (header and data).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.writeMRC" title="colabseg.image_io.ImageIO.writeMRC"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeMRC</span></code></a>([file, header, byteOrder, shape, ...])</p></td>
<td><p>Writes MRC file (header and data).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#colabseg.image_io.ImageIO.writeRaw" title="colabseg.image_io.ImageIO.writeRaw"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeRaw</span></code></a>([file, header, data, shape, ...])</p></td>
<td><p>Writes raw data.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.adjustLength">
<span class="sig-name descname"><span class="pre">adjustLength</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.adjustLength" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate length based on shape and pixel. If args shape and
pixel are None, self.shape and self.pixel are used.
The length is calculated in A, as this is what is used in mrc
header. To be used for mrc files only.
Sets attribute length.
Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p>shape: data shape</p></li>
<li><p>pixel: pixel size in nm</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.byte_order">
<span class="sig-name descname"><span class="pre">byte_order</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'little'</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.byte_order" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.checkFile">
<span class="sig-name descname"><span class="pre">checkFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.checkFile" title="Permalink to this definition">#</a></dt>
<dd><p>If <a href="#id17"><span class="problematic" id="id18">file_</span></a> is a string open the file with that name. If <a href="#id19"><span class="problematic" id="id20">file_</span></a> is None,
use self.fileName and open the file.
If <a href="#id21"><span class="problematic" id="id22">file_</span></a> is a file instance don’t do anything.
Sets:</p>
<blockquote>
<div><ul class="simple">
<li><p>self.fileName: <a href="#id23"><span class="problematic" id="id24">file_</span></a> if a string</p></li>
<li><p><a href="#id25"><span class="problematic" id="id26">self.file_</span></a>: file instance</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Arguments:</dt><dd><ul class="simple">
<li><p><a href="#id27"><span class="problematic" id="id28">file_</span></a>: file name or instance of file</p></li>
<li><p>mode: mode as in open()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.em">
<span class="sig-name descname"><span class="pre">em</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'arrayOrder':</span> <span class="pre">'F',</span> <span class="pre">'defaultByteOrder':</span> <span class="pre">'&lt;',</span> <span class="pre">'headerFormat':</span> <span class="pre">'4b</span> <span class="pre">3i</span> <span class="pre">80s</span> <span class="pre">40i</span> <span class="pre">20s</span> <span class="pre">8s</span> <span class="pre">228s',</span> <span class="pre">'headerSize':</span> <span class="pre">512}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.em" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emByteOrderTab">
<span class="sig-name descname"><span class="pre">emByteOrderTab</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{5:</span> <span class="pre">'&gt;',</span> <span class="pre">6:</span> <span class="pre">'&lt;'}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emByteOrderTab" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emByteOrderTabInv">
<span class="sig-name descname"><span class="pre">emByteOrderTabInv</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'&lt;':</span> <span class="pre">6,</span> <span class="pre">'&gt;':</span> <span class="pre">5}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emByteOrderTabInv" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emDataTypeTab">
<span class="sig-name descname"><span class="pre">emDataTypeTab</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{1:</span> <span class="pre">'uint8',</span> <span class="pre">2:</span> <span class="pre">'uint16',</span> <span class="pre">4:</span> <span class="pre">'int32',</span> <span class="pre">5:</span> <span class="pre">'float32',</span> <span class="pre">8:</span> <span class="pre">'complex64',</span> <span class="pre">9:</span> <span class="pre">'float64'}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emDataTypeTab" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emDataTypeTabInv">
<span class="sig-name descname"><span class="pre">emDataTypeTabInv</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'complex64':</span> <span class="pre">8,</span> <span class="pre">'float32':</span> <span class="pre">5,</span> <span class="pre">'float64':</span> <span class="pre">9,</span> <span class="pre">'int32':</span> <span class="pre">4,</span> <span class="pre">'uint16':</span> <span class="pre">2,</span> <span class="pre">'uint8':</span> <span class="pre">1}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emDataTypeTabInv" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emDefaultHeader">
<span class="sig-name descname"><span class="pre">emDefaultHeader</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[6,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">b'</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">b'</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">b'</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">b'</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">']</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emDefaultHeader" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emDefaultShape">
<span class="sig-name descname"><span class="pre">emDefaultShape</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0]</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emDefaultShape" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.emHeaderFields">
<span class="sig-name descname"><span class="pre">emHeaderFields</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('machine',</span> <span class="pre">'newOS9',</span> <span class="pre">'noHeader',</span> <span class="pre">'dataTypeCode',</span> <span class="pre">'lengthX',</span> <span class="pre">'lengthY',</span> <span class="pre">'lengthZ',</span> <span class="pre">'comment',</span> <span class="pre">'voltage',</span> <span class="pre">'cs',</span> <span class="pre">'aperture',</span> <span class="pre">'magnification',</span> <span class="pre">'postmagnification',</span> <span class="pre">'exposureTime',</span> <span class="pre">'_pixelsize',</span> <span class="pre">'emCode',</span> <span class="pre">'ccdPixelsize',</span> <span class="pre">'ccdLength',</span> <span class="pre">'defocus',</span> <span class="pre">'astigmatism',</span> <span class="pre">'astigmatismAngle',</span> <span class="pre">'focusIncrement',</span> <span class="pre">'countsPerelectron',</span> <span class="pre">'intensity',</span> <span class="pre">'energySlitWidth',</span> <span class="pre">'energyOffset',</span> <span class="pre">'_tiltAngle',</span> <span class="pre">'tiltAxis',</span> <span class="pre">'field_21',</span> <span class="pre">'field_22',</span> <span class="pre">'field_23',</span> <span class="pre">'markerX',</span> <span class="pre">'markerY',</span> <span class="pre">'resolution',</span> <span class="pre">'density',</span> <span class="pre">'contrast',</span> <span class="pre">'field_29',</span> <span class="pre">'massCentreX',</span> <span class="pre">'massCentreY',</span> <span class="pre">'massCentreZ',</span> <span class="pre">'height',</span> <span class="pre">'field_34',</span> <span class="pre">'widthDreistrahlbereich',</span> <span class="pre">'widthAchromRing',</span> <span class="pre">'lambda',</span> <span class="pre">'deltaTheta',</span> <span class="pre">'field_39',</span> <span class="pre">'field_40',</span> <span class="pre">'username',</span> <span class="pre">'date',</span> <span class="pre">'userdata')</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.emHeaderFields" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.fileFormats">
<span class="sig-name descname"><span class="pre">fileFormats</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'EM':</span> <span class="pre">'em',</span> <span class="pre">'RAW':</span> <span class="pre">'raw',</span> <span class="pre">'dat':</span> <span class="pre">'raw',</span> <span class="pre">'em':</span> <span class="pre">'em',</span> <span class="pre">'mrc':</span> <span class="pre">'mrc',</span> <span class="pre">'mrcs':</span> <span class="pre">'mrc',</span> <span class="pre">'raw':</span> <span class="pre">'raw',</span> <span class="pre">'rec':</span> <span class="pre">'mrc'}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.fileFormats" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.fix">
<span class="sig-name descname"><span class="pre">fix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">microscope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.fix" title="Permalink to this definition">#</a></dt>
<dd><p>Fixes wrong values in header and in the data.</p>
<dl>
<dt>Mode determines which values are fixed. Currently defined modes are:</dt><dd><ul class="simple">
<li><p>‘polara_fei-tomo’: images obtained on Polara (at MPI of</p></li>
</ul>
<p>Biochemistry) using FEI tomography package and saved in EM
format.
- ‘krios_fei-tomo’: images obtained on Krios (at MPI of
Biochemistry) using FEI tomography package and saved in EM
format.
- ‘cm300’: images from cm300 in EM format</p>
</dd>
</dl>
<p>If mode is polara_fei-tomo, then arg microscope has to be specified.
The allowed values are specified in microscope_db.py. Currently (r564)
these are: ‘polara-1_01-07’, ‘polara-1_01-09’ and ‘polara-2_01-09’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.fixHeader">
<span class="sig-name descname"><span class="pre">fixHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">microscope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.fixHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Fixes wrong values in microscope image header.
Mode determines which values are fixed. Currently defined modes are:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘polara_fei-tomo’: images obtained on Polara (at MPI of</p></li>
</ul>
<p>Biochemistry) using FEI tomography package and saved in EM
format. Values fixed:</p>
<blockquote>
<div><ul class="simple">
<li><p>voltage: set to 300000</p></li>
<li><p>cs: set to 2000</p></li>
<li><p>ccdPixelsize: physical pixel size, read from microscope_db</p></li>
<li><p>ccdLength: physical size of the CCD, pixelsize x n_pixels</p></li>
<li><p>_pixelsize: pixel size at the specimen level [fm]. Nominal mag</p></li>
</ul>
<p>is read from the header and converted to pixelsize using
microscope_db</p>
</div></blockquote>
<ul class="simple">
<li><p>‘krios_fei-tomo’: images obtained on Krios (at MPI of</p></li>
</ul>
<p>Biochemistry) using FEI tomography package and saved in EM
format. Pixel size at the specimen level is correct, and the physical
detector length might be correct. Values fixed:</p>
<blockquote>
<div><ul class="simple">
<li><p>voltage: set to 300000</p></li>
<li><p>cs: set to 2000</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>‘cm300’: images from cm300 in EM format</p></li>
<li><p>None: doesn’t do anything</p></li>
</ul>
</div></blockquote>
<p>If mode is ‘polara_fei-tomo’, then arg microscope has to be specified.
The allowed values are specified in microscope_db.py. Currently (r564)
these are: ‘polara-1_01-07’, ‘polara-1_01-09’ and ‘polara-2_01-09’.
Updates the appropriate header: self.emHeader if file format is ‘em’,
or self.mrcHeader for mrc files.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.getFromEMHeader">
<span class="sig-name descname"><span class="pre">getFromEMHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.getFromEMHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the value of variable name from self.emHeader and returns it.
Comment: alternatively, self.name can be used. Not sure which
approach is better (VL 04.01.01).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.getPixelsize">
<span class="sig-name descname"><span class="pre">getPixelsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.getPixelsize" title="Permalink to this definition">#</a></dt>
<dd><p>Returns pixel size (at specimen level) in nm.
For mrc files a single pixelsize is returned if it’s the same for all
dimensions, otherwise a list of pixelsizes (for each dimension) is
returned. Pixelsizes are considered the same if they do not differ
more than arg diff.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.getTiltAngle">
<span class="sig-name descname"><span class="pre">getTiltAngle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.getTiltAngle" title="Permalink to this definition">#</a></dt>
<dd><p>Returns titl angle in degrees.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.machineByteOrder">
<span class="sig-name descname"><span class="pre">machineByteOrder</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'&lt;'</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.machineByteOrder" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.mrc">
<span class="sig-name descname"><span class="pre">mrc</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'defaultArrayOrder':</span> <span class="pre">'F',</span> <span class="pre">'defaultAxisOrder':</span> <span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3),</span> <span class="pre">'defaultByteOrder':</span> <span class="pre">'&lt;',</span> <span class="pre">'headerFormat':</span> <span class="pre">'10i</span> <span class="pre">6f</span> <span class="pre">3i</span> <span class="pre">3f</span> <span class="pre">2i</span> <span class="pre">h</span> <span class="pre">30s</span> <span class="pre">4h</span> <span class="pre">6f</span> <span class="pre">6h</span> <span class="pre">12f</span> <span class="pre">i</span> <span class="pre">800s',</span> <span class="pre">'headerSize':</span> <span class="pre">1024}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.mrc" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.mrcDataTypeTab">
<span class="sig-name descname"><span class="pre">mrcDataTypeTab</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{0:</span> <span class="pre">'ubyte',</span> <span class="pre">1:</span> <span class="pre">'int16',</span> <span class="pre">2:</span> <span class="pre">'float32',</span> <span class="pre">4:</span> <span class="pre">'complex64',</span> <span class="pre">6:</span> <span class="pre">'uint16'}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.mrcDataTypeTab" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.mrcDataTypeTabInv">
<span class="sig-name descname"><span class="pre">mrcDataTypeTabInv</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'complex64':</span> <span class="pre">4,</span> <span class="pre">'float32':</span> <span class="pre">2,</span> <span class="pre">'int16':</span> <span class="pre">1,</span> <span class="pre">'ubyte':</span> <span class="pre">0,</span> <span class="pre">'uint16':</span> <span class="pre">6}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.mrcDataTypeTabInv" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.mrcDefaultHeader">
<span class="sig-name descname"><span class="pre">mrcDefaultHeader</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">b'</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0,</span> <span class="pre">b'</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">']</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.mrcDefaultHeader" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.mrcDefaultPixel">
<span class="sig-name descname"><span class="pre">mrcDefaultPixel</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[1,</span> <span class="pre">1,</span> <span class="pre">1]</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.mrcDefaultPixel" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.mrcDefaultShape">
<span class="sig-name descname"><span class="pre">mrcDefaultShape</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[1,</span> <span class="pre">1,</span> <span class="pre">1]</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.mrcDefaultShape" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.parseMRCHeader">
<span class="sig-name descname"><span class="pre">parseMRCHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.parseMRCHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Parse mrc header. If arg header is None, self.mrcHeader is used.
Also sets self.labels in case self.headerString is present. In this
case self.headerString has to be consistent with header (arg or
attribute).
Sets attributes:</p>
<blockquote>
<div><ul class="simple">
<li><p>mrcHeader (if given as arg)</p></li>
<li><p>byteOrder</p></li>
<li><p>shape</p></li>
<li><p>dataType</p></li>
<li><p>axisOrder</p></li>
<li><p>pixel: pixel size in nm</p></li>
<li><p>length: lenght in all dimensions in nm</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.pixelsize">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pixelsize</span></span><a class="headerlink" href="#colabseg.image_io.ImageIO.pixelsize" title="Permalink to this definition">#</a></dt>
<dd><p>Pixel size (at specimen level) in nm</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.putInEMHeader">
<span class="sig-name descname"><span class="pre">putInEMHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.putInEMHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Puts value in self.EmHeaderFields at the position corresponding to
name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'defaultArrayOrder':</span> <span class="pre">'F',</span> <span class="pre">'defaultByteOrder':</span> <span class="pre">'&lt;',</span> <span class="pre">'defaultHeaderSize':</span> <span class="pre">0}</span></em><a class="headerlink" href="#colabseg.image_io.ImageIO.raw" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileFormat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.read" title="Permalink to this definition">#</a></dt>
<dd><p>Reads image file in em, mrc or raw data formats and saves the
data in numpy.array format.
For reading em and mrc files (having correct extension) only file
argument is necessary:</p>
<blockquote>
<div><p>image = Image()
image.read(file=’myfile.em’)</p>
</div></blockquote>
<dl class="simple">
<dt>or to prvent reading the whole file into memory:</dt><dd><p>image.read(file=’myfile.em’, memmap=True)</p>
</dd>
<dt>Alternatively, file name can be given in the constructor:</dt><dd><p>image = Image(file=’myfile.em’)
image.read()</p>
</dd>
</dl>
<p>If other arguments are given they will override the corresponding
values obtained form image header (use if you know what you’re
doing).
For reading raw files, arguments dataType and shape need to
be specified:</p>
<blockquote>
<div><p>read(file=’myfile.raw’, dataType=’float32’, shape=(200,150,70))</p>
</div></blockquote>
<p>By default, arguments byteOrder=’&lt;’ (little-endian) and
arrayOrder=’F’.
For mrc and em files, array order is determined from arg arrayOrder,
from self.arrayOrder, or it is set to the default (“F”) in
this order. Data is read according the determined array order.
That is, array order is not read from the file header.
File format is determined from the extension:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘em’ and ‘EM’ for em format</p></li>
<li><p>‘mrc’, ‘rec’ and ‘mrcs’ for mrc format</p></li>
<li><p>‘raw’, ‘dat’ and ‘RAW’ for raw format</p></li>
</ul>
</div></blockquote>
<p>This can be overriden by specifying fileFormat argument.
Byte order is read from the header for em files. For mrc, data type
is read from the header using the system byte order and if that fails
using the other one. In case that also fails ValueError is raised.
The data is read according to
Array order is not read from the header. Instead, array order
specified by arg arrayOrder or self.arrayOrder is used for
reading the data.
If arg memmap is True, instead into a ndarray, the data is read to
a memory map. That means that the complete data is not read into
the memory, but the required parts are read on demand. This is useful
when working with large images, but might not always work properly
because the memory map is not quite properly a subclass of
numpy.ndarray (from Numpy doc).
Data from mrc files is always read as 3D because mrc header always
contains lengths for all three dimensions (the length of the last
dimeension is 1 for 2D images). In such cases one can obtain the
2D ndarray using:</p>
<blockquote>
<div><p>self.data.reshape(self.data.shape[0:2])</p>
</div></blockquote>
<dl>
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>file: file name</p></li>
<li><p>fileFormat: ‘em’, ‘mrc’, or ‘raw’</p></li>
<li><p>byteOrder: ‘&lt;’ (little-endian), ‘&gt;’ (big-endian)</p></li>
<li><p>dataType: any of the numpy types, e.g.: ‘int8’, ‘int16’, ‘int32’,
‘float32’, ‘float64’</p></li>
<li><p>arrayOrder: ‘C’ (z-axis fastest), or ‘F’ (x-axis fastest)</p></li>
<li><p>shape: (x_dim, y_dim, z_dim), needs to be compatible with the</p></li>
</ul>
<p>data read
- memmap: Flag indicating if the data is read to a memory map,
instead of reading it into a ndarray</p>
</dd>
<dt>Sets the following attributes (in addition to the arguments):</dt><dd><ul class="simple">
<li><p>data: data in numpy.array form</p></li>
<li><p>emHeader / mrcHeader: tuple of all header values (em/mrc) files</p></li>
<li><p>header: emHeader for em file, mrcHeader for mrc file or raw header</p></li>
</ul>
<p>for raw file
- headerString: string containing a header</p>
</dd>
</dl>
<p>Alternatively, any argument can be omitted if an attribute of the
same name is set.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readData">
<span class="sig-name descname"><span class="pre">readData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readData" title="Permalink to this definition">#</a></dt>
<dd><p>Reads data from an image file. The data are read to numpy.ndarray
if memmap is False, or a ndarray-like memory mapis created if
memmap is True.
Should not be used directly. Instance attributes: file, dataType,
byteOrder, arrayOrder and shape have to be set before calling this
method.
Sets self.memmap to the value of the memmap argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readEM">
<span class="sig-name descname"><span class="pre">readEM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readEM" title="Permalink to this definition">#</a></dt>
<dd><p>Reads EM file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readEMHeader">
<span class="sig-name descname"><span class="pre">readEMHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readEMHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a header of an EM file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readHeader">
<span class="sig-name descname"><span class="pre">readHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileFormat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Reads heder of an image file in em, mrc or raw data formats.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readMRC">
<span class="sig-name descname"><span class="pre">readMRC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readMRC" title="Permalink to this definition">#</a></dt>
<dd><p>Reads mrc file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readMRCHeader">
<span class="sig-name descname"><span class="pre">readMRCHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readMRCHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a header of an mrc file.
To dermine the byte order the file header is read according to the
system byte order. If the data type is not recognized, the other
byte order is used and the data type is checked again. If it still
doesn’t work, ValueError is raised.
Sets attributes:</p>
<blockquote>
<div><ul class="simple">
<li><p>headerString</p></li>
<li><p>mrcHeader</p></li>
<li><p>byteOrder</p></li>
<li><p>shape</p></li>
<li><p>dataType</p></li>
<li><p>axisOrder</p></li>
<li><p>pixel: pixel size in nm</p></li>
<li><p>length: linght in all dimensions in nm</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readRaw">
<span class="sig-name descname"><span class="pre">readRaw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headerSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readRaw" title="Permalink to this definition">#</a></dt>
<dd><p>Reads raw data file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.readRawHeader">
<span class="sig-name descname"><span class="pre">readRawHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.readRawHeader" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a header of a raw file.
Sets:</p>
<blockquote>
<div><ul class="simple">
<li><p>headerString: header as a string</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>file: file name or a file instance</p></li>
<li><p>size: header size in bytes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.setData">
<span class="sig-name descname"><span class="pre">setData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.setData" title="Permalink to this definition">#</a></dt>
<dd><p>Reshapes data according to the arg shape (if specified) and saves it
as attribute self.data. Also sets attributes self.shape and
self.dataType accordingly.
For mrc files, length is also set (see self.adjustLength()). In
this case, arg pixel has to be specified, or self.pixel has
to be defined previously.
Sets attributes:</p>
<blockquote>
<div><ul class="simple">
<li><p>data</p></li>
<li><p>shape</p></li>
<li><p>dataType</p></li>
<li><p>length</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Arguments:</dt><dd><ul class="simple">
<li><p>data: image data</p></li>
<li><p>shape: image shape</p></li>
<li><p>pixel: pixel size in nm</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.setFileFormat">
<span class="sig-name descname"><span class="pre">setFileFormat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileFormat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.setFileFormat" title="Permalink to this definition">#</a></dt>
<dd><p>Sets self.fileFormat.
It is determined in the following order: first
from the argument fileFormat, then from the file extension and
finally from the already existing value of self.fileFormat
Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p><a href="#id29"><span class="problematic" id="id30">file_</span></a>: file name</p></li>
<li><p>fileFormat: file Format</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.setTiltAngle">
<span class="sig-name descname"><span class="pre">setTiltAngle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.setTiltAngle" title="Permalink to this definition">#</a></dt>
<dd><p>Sets self._tiltAngle to angle*1000 and puts that value in emHeader.
Works only for em format.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.tiltAngle">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tiltAngle</span></span><a class="headerlink" href="#colabseg.image_io.ImageIO.tiltAngle" title="Permalink to this definition">#</a></dt>
<dd><p>Tilt angle (in deg)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileFormat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extended</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">casting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'unsafe'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.write" title="Permalink to this definition">#</a></dt>
<dd><p>Writes image file (header if applicable and data).
Values of all non-None arguments are saved as properties with same
names.
If fileFormat is not given it is determined from the file extension.
Data (image) has to be specified by arg data or previously set
self.data attribute.
Data type and shape are determined by args dataType and shape,
previously set attributes self.dataType and self.shape, or by the data
type and shape of the data, in this order.
If data type (determined as described above) is not one of the
data types used for the specified file format (ubyte, int16, float32,
complex64 for mrc and uint8, uint16, int32, float32, float64,
complex64 for em), then the value of arg dataType has to be one of the
appropriate data types. Otherwise an exception is raised.
If data type (determined as described above) is different from the
type of actual data, the data is converted to the data type. Note that
if these two types are incompatible according to arg casting, an
exception is raised.
Values for byteOrder and arrayOrder are set to the first value found
from the following: the arguments, properties with same names, or
emHeader / mrcHeader default values.
The data is converted to the (prevously determined) shape and array
order and then written. That means that the shape and the array order
may be changed in the original array (argument data or self.data).
However, array order is not written the header.
If data is not given, only a header is writen.
Additional header parameters are determined for mrc format. Nxstart,
nystart and nzstart are set to 0, while mx, my and mz to the
corresponding data size (grid size). xlen, ylen and zlen are taken from
arg length if given, or obtained by multiplying data size with pixel
size (in nm).
Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p>file: file name</p></li>
<li><p>data: (ndarray) image</p></li>
<li><p>fileFormat: ‘em’, ‘mrc’, or ‘raw’</p></li>
<li><p>byteOrder: ‘&lt;’ (little-endian), ‘&gt;’ (big-endian)</p></li>
<li><p>dataType: any of the numpy types specified as strings, e.g.:
‘int8’, ‘int16’, ‘int32’, ‘float32’, ‘float64’, or as
numpy.dtype</p></li>
<li><p>arrayOrder: ‘C’ (z-axis fastest), or ‘F’ (x-axis fastest)</p></li>
<li><p>shape: (x_dim, y_dim, z_dim)</p></li>
<li><p>length: (list aor ndarray) length in each dimension in nm (used</p></li>
</ul>
<p>only for mrc format)
- pixel: pixel size in nm (used only for mrc format if length is
None)
- header: (list) image header
- extended: (str) extended header string, only for mrc
- casting: Controls what kind of data casting may occur: ‘no’,
‘equiv’, ‘safe’, ‘same_kind’, ‘unsafe’. Identical to numpy.astype()
method.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.writeData">
<span class="sig-name descname"><span class="pre">writeData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.writeData" title="Permalink to this definition">#</a></dt>
<dd><p>Writes data in numpy.ndarray format to an image file.
Transforms self.data according to self.dataType, self.byteOrder and
self.shape before writing.
Should not be used directly. Instance attributes: file, data, dataType,
byteOrder, arrayOrder and shape have to be set before calling this
method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.writeEM">
<span class="sig-name descname"><span class="pre">writeEM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">casting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'unsafe'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.writeEM" title="Permalink to this definition">#</a></dt>
<dd><p>Writes EM file (header and data).
File can be a file name (string) or an instance of file. If not given
self.fileName determines the file name.
Values of all non-None arguments are saved as properties with same
names.
Data (image) has to be specified by arg data or previously set
self.data attribute.
Data type and shape are determined by args dataType and shape,
previously set attributes self.dataType and self.shape, or by the data
type and shape of the data, in this order.
If data type (determined as described above) is not one of the em
data types (uint8, uint16, int32, float32, float64, complex64), then
the value of arg dataType has to be one of the em data types. Otherwise
an exception is raised.
If data type (determined as described above) is different from the
type of actual data, the data is converted to the data type. Note that
if these two types are incompatible according to arg casting, an
exception is raised.
Values for byteOrder and arrayOrder are set to the first value found
from the arguments, properties with same names, from emHeader of
default values.
If data is not given, only a header is written.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.writeMRC">
<span class="sig-name descname"><span class="pre">writeMRC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extended</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">casting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'unsafe'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.writeMRC" title="Permalink to this definition">#</a></dt>
<dd><p>Writes MRC file (header and data).
Values of all non-None arguments are saved as properties with same
names.
Data (image) has to be specified by arg data or previously set
self.data attribute.
Data type and shape are determined by args dataType and shape,
previously set attributes self.dataType and self.shape, or by the data
type and shape of the argument data, in this order.
If data type (determined as described above) is not one of the mrc
data types (ubyte, int16, float32, complex64), then the value of arg
dataType has to be one of the mrc data types. Otherwise an exception
is raised.
If data type (determined as described above) is different from the
type of actual data, the data is converted to the data type. Note that
if these two types are incompatible according to arg casting an
exception is raised.
Values for byteOrder and arrayOrder are set to the first value found
from the following: arguments, properties with same names, or
mrcHeader of default values.</p>
<p>The data is converted to the (prevously determined) shape and array
order and then written. That means that the shape and the array order
may be changed in the original array (argument data or self.data).
However, array order is not written the header.
Header parameters nxstart, nystart and nzstart are set to 0, while mx,
my and mz to the corresponding data size (grid size).
MRC parameters xlen, ylen and zlen are taken from arg length if given,
or obtained by multiplying data size with pixel size (in nm).
MRC parameters min, max and mean are recalculated.
All other header values are defined in the mrcDefaultHeader.
The default value of axisOrder can be changed by setting
self.axisOrder.
If data is not given, only a header is writen.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="colabseg.image_io.ImageIO.writeRaw">
<span class="sig-name descname"><span class="pre">writeRaw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byteOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">casting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'unsafe'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#colabseg.image_io.ImageIO.writeRaw" title="Permalink to this definition">#</a></dt>
<dd><p>Writes raw data.
Values of all non-None arguments are saved as properties with same
names.
Data (image) has to be specified by arg data or previously set
self.data attribute.
Data type and shape are determined by args dataType and shape,
previously set attributes self.dataType and self.shape, or by the data
type and shape of the data, in this order.
If data type (determined as described above) is different from the
type of actual data, the data is converted to the data type. Note that
if these two types are incompatible an exception is raised.
Values for byteOrder and arrayOrder, are set to the first value found
from the arguments, or properties with same names.</p>
</dd></dl>

</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.FileTypeError"><code class="docutils literal notranslate"><span class="pre">FileTypeError</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO"><code class="docutils literal notranslate"><span class="pre">ImageIO</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.adjustLength"><code class="docutils literal notranslate"><span class="pre">ImageIO.adjustLength()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.byte_order"><code class="docutils literal notranslate"><span class="pre">ImageIO.byte_order</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.checkFile"><code class="docutils literal notranslate"><span class="pre">ImageIO.checkFile()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.em"><code class="docutils literal notranslate"><span class="pre">ImageIO.em</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emByteOrderTab"><code class="docutils literal notranslate"><span class="pre">ImageIO.emByteOrderTab</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emByteOrderTabInv"><code class="docutils literal notranslate"><span class="pre">ImageIO.emByteOrderTabInv</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emDataTypeTab"><code class="docutils literal notranslate"><span class="pre">ImageIO.emDataTypeTab</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emDataTypeTabInv"><code class="docutils literal notranslate"><span class="pre">ImageIO.emDataTypeTabInv</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emDefaultHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.emDefaultHeader</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emDefaultShape"><code class="docutils literal notranslate"><span class="pre">ImageIO.emDefaultShape</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.emHeaderFields"><code class="docutils literal notranslate"><span class="pre">ImageIO.emHeaderFields</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.fileFormats"><code class="docutils literal notranslate"><span class="pre">ImageIO.fileFormats</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.fix"><code class="docutils literal notranslate"><span class="pre">ImageIO.fix()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.fixHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.fixHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.getFromEMHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.getFromEMHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.getPixelsize"><code class="docutils literal notranslate"><span class="pre">ImageIO.getPixelsize()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.getTiltAngle"><code class="docutils literal notranslate"><span class="pre">ImageIO.getTiltAngle()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.machineByteOrder"><code class="docutils literal notranslate"><span class="pre">ImageIO.machineByteOrder</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.mrc"><code class="docutils literal notranslate"><span class="pre">ImageIO.mrc</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.mrcDataTypeTab"><code class="docutils literal notranslate"><span class="pre">ImageIO.mrcDataTypeTab</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.mrcDataTypeTabInv"><code class="docutils literal notranslate"><span class="pre">ImageIO.mrcDataTypeTabInv</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.mrcDefaultHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.mrcDefaultHeader</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.mrcDefaultPixel"><code class="docutils literal notranslate"><span class="pre">ImageIO.mrcDefaultPixel</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.mrcDefaultShape"><code class="docutils literal notranslate"><span class="pre">ImageIO.mrcDefaultShape</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.parseMRCHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.parseMRCHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.pixelsize"><code class="docutils literal notranslate"><span class="pre">ImageIO.pixelsize</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.putInEMHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.putInEMHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.raw"><code class="docutils literal notranslate"><span class="pre">ImageIO.raw</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.read"><code class="docutils literal notranslate"><span class="pre">ImageIO.read()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readData"><code class="docutils literal notranslate"><span class="pre">ImageIO.readData()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readEM"><code class="docutils literal notranslate"><span class="pre">ImageIO.readEM()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readEMHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.readEMHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.readHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readMRC"><code class="docutils literal notranslate"><span class="pre">ImageIO.readMRC()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readMRCHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.readMRCHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readRaw"><code class="docutils literal notranslate"><span class="pre">ImageIO.readRaw()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.readRawHeader"><code class="docutils literal notranslate"><span class="pre">ImageIO.readRawHeader()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.setData"><code class="docutils literal notranslate"><span class="pre">ImageIO.setData()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.setFileFormat"><code class="docutils literal notranslate"><span class="pre">ImageIO.setFileFormat()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.setTiltAngle"><code class="docutils literal notranslate"><span class="pre">ImageIO.setTiltAngle()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.tiltAngle"><code class="docutils literal notranslate"><span class="pre">ImageIO.tiltAngle</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.write"><code class="docutils literal notranslate"><span class="pre">ImageIO.write()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.writeData"><code class="docutils literal notranslate"><span class="pre">ImageIO.writeData()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.writeEM"><code class="docutils literal notranslate"><span class="pre">ImageIO.writeEM()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.writeMRC"><code class="docutils literal notranslate"><span class="pre">ImageIO.writeMRC()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colabseg.image_io.ImageIO.writeRaw"><code class="docutils literal notranslate"><span class="pre">ImageIO.writeRaw()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/reference/image_io.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=c5ced968eda925caa686"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=c5ced968eda925caa686"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023 European Molecular Biology Laboratory.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>